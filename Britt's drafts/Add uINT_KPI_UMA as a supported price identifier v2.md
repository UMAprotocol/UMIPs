## Headers

| **UMIP #** *Leave blank - an UMIP no will be assigned at proposal stage*
              
| ------------------- | ------------------------------------------------------------- |
| **UMIP Title**          | **Add** *uDAO_KPI_UMA* **as a supported price identifier**|
| **Authors**             | *Brittany Madruga (brittany.madruga@gmail.com) Clayton Roche (claytonroche@gmail.com)*                                                      |
| **Status**              | **Draft**                                                         |
| **Created**             | *06/08/2021*                                             |
| **Discourse Link**      | *Insert link to discourse topic  **after**  it has been moved into draft UMIPs_*            |

# Summary 

**The DVM should support requests for** UMA protocol DAO integrations.

Key Performance Indicator(KPI) options are synthetic tokens that redeem to protocol tokens with the redemption value determined by performance against that indicator. One example of a KPI metric is Integrations. Integrations serve to measure the activity of the protocol rather than assigning all of the value to the dollar amount generated by the protocol, as previously seen in UMA‚Äôs TVL KPI option. 

This UMIP enables the DVM to support price requests based on the number of qualifying integrations that occured during a specified timeline. This UMIP relies on the use of ancillary data, and will include a section on that below.

A synthetic option is minted against a base collateral, in this case UMA. 


# Motivation

The primary motivation for the development of KPI options is to allow protocols to incentivize DeFi users to assist them to reach the protocol's identified targets by leveraging their community resources by sharing their value with their community members.

Using DAO integrations as a key metric directly benefits the UMA protocol because it encourages the community to build relationships in the broader DeFi community with the intention of providing tools that may be useful to teams who are currently unaware of what UMA has to offer. This creates a win-win across the board because it allows us to showcase our products and our products can then help other protocols to complete their goals. 

By establishing the terms of a qualifying integration, it allows for the community to reach out in a way that aligns with the current priorities of the UMA protocol- attracting attention to our strongest products and encouraging teams to test out a wide variety of use cases.


**It is anticipated that this Price Identifier will be used to create KPI Options, however it is acknowledged that it may be used for a variety of purposes.**

# Data Specifications

The UMA team will maintain a "green light" list of qualified integrations, which will be readily available upon request. Anyone can propose adding an integration to the list. Each integration will be added one at a time, after it has been discussed in the #voting channel in the UMA Discord. UMA tokenholders are encouraged to participate in these discussions.

An integration will have been achieved when a DAO funds with tokens one of the following three product categories:

* KPI options
* Call/Put options
* Range Bonds

**Definitions:**
*Fund* - To fund means to take the DAO‚Äôs native token or another asset from the treasury and put it into one of these above product types. The intention here is that these products will be used as a way to interact with the DAO‚Äôs community. There is an edge case here where a DAO might put money into a product with the intention to trade--This is not the spirit of this initiative and should not count towards an integration (although it is not discouraged behavior.)

*Product Categories* - The three product categories have been explored and defined in a variety of articles, and many of the articles can be seen on UMA‚Äôs medium page. These product types would primarily be built using UMA‚Äôs LSP (Long/Short Pair) contract, and in some cases can use the EMP contract. However, it is important to note that they will all be fully capitalized products, without any chance or need for liquidations.
Only one integration per product type per DAO can qualify. This means that the maximum number of integrations available to a single DAO would be 3. It is perhaps possible to imagine a DAO that has subsidiaries or close partnerships with other DAOs, such that it is not clear to which DAO a product integration would apply. In this case, the authors suggest deferring to the ambiguity consideration section below. 

*DAO* - A decentralized, autonomous organization. We would expect them to have a native token (although this is not a requirement) and a governance system. There are perhaps DAOs that are not yet very decentralized--they should be included all the same. However, the spirit of this design is that it incentivizes DAO-to-DAO activity, and so we would expect that to represent the lionshare of activity. If there is a non-DAO integration that is judged to be especially valuable, it is up to the discretion of Risk Labs to offer additional uDAO tokens as a reward. 

**Ambiguity Considerations**

With regard to the definition of a DAO, this is perhaps the definition in the list with the most leeway. It is easy to know a good DAO when you see it, but it is possible to imagine ‚Äúbad DAOs.‚Äù For example, consider a DAO that was created for the express purpose of increasing integrations. The authors here suggest using the inclusion criteria that borrows from that of trusted information sources in the space. To codify this, a DAO must be included somewhere on one of these lists:

* CoinGecko - Their product token must be listed here
* DeFi Pulse - If they are listed on DeFi Pulse, they quality as a DAO

There is one type that this misses: new projects with illiquid tokens. We wouldn‚Äôt want to exclude this valuable integration type from inclusion in the KPI Options. This is a category that we will leave to UMA tokenholders to evaluate. As a guiding principle, a qualifying DAO is part of a good faith project; a disqualifying DAO would be one with no genuine attempt at a company or organization.

**Additional Notes:** 

LSP contracts deployed by UMA for use by UMA do not count, but if UMA deploys a contract for use by another team, it is eligible as long as it meets the criteria above.

Contracts included are not limited to Ethereum mainnet- contracts on other chains where DVM message bridging is available (e.g. Polygon) will be included in consideration.

The applied timeframe for this UMIP will be specified in ancillary data, and all qualifying integrations launched during this timeframe should be counted. 

# Ancillary Data Specifications
The following pieces of data will be included as ancillary data when the contract is deployed, and will provide additional details & instructions to help voters correctly identify the number of qualifying integrations.

* expiry timestamp
* start timestamp
* Max base integrations
* Max bonus integrations
* Bonus integrations multiplier

# Technical Specifications

- **Price identifier name:**  *uDAO_KPI_UMA*
- **Base: Number of qualified DAO integrations
- **There is no quote currency in this option, as design feature. The collateral redemption is tied to the** *number of qualified integrations* **by design**
 - **Intended Collateral Currency** *UMA*.
- **Rounding:** *Round to nearest whole number, however this should not be necessary* 
 

# Rationale

* Linear scaling is used for sake of ease for contract deployment and for voters. Integrations that qualify for a bonus will simply be treated as multiple integrations as a way to recognize the increased value and work needed to get them across the finish line.

*Minimum payout will be baked into the contract, rather than reflected in the implementation process. This design choice is intented to account for the integrations that occurred prior to launch, in an effort to reward the community for hard work leading up to the launch of this KPI option. More details on minimum payout and scaling can be found within the deployed contract. 

* The decision to stick to the listed product types was made in order to focus the community and align incentives with the strategic goals of the organization.

* Setting it up to allow for all qualified launches to be counted throughout the period rather than just at the time of expiry helps to ensure that we are not missing out on any integrations that might expire before the KPI option does. 

* Choosing a starting timestamp prior to launch of this option is a design feature that helps to reward the community for the integrations they have already started on and help keep momentum going while the current KPI expires. Using ancillary data to provide this field allows the deployer of the contract to choose the starting timestamp as they see fit.

* The rationale for choosing DAO integrations was to emphasize building DAO-to-DAO relationships. UMA‚Äôs product suite has increasingly gained focus and traction on DAO treasury management. However, it is not scalable for the development team to focus on promotion and integration efforts alone, and this KPI Option has been designed to help recruit the community to help.


# Implementation

Step 1: Refer to "green light" list for finalized information on all qualified integrations. Assign 1 point for each integration on the list. 

Step 2: If an integration qualifies for a bonus, it will be indicated with a üêã. These integrations are worth some multiplier of points, which will be specified in the ancillary data as `bonusIntegrationsMultiplier`. Keep track of bonus points in addition to base points.  

Step 2: Tally up the total number of base points as well as the number of bonus points. At this point, the two numbers should be separate.

Step 3: The ancillary data specifications for max base points and max bonus points, decide if your tally requires rounding down for either of those values. 

Step 4: After rounding has been accounted for, add base points plus bonus points for the total number of points. This is the value you will return. 


# Security Considerations

Due to the bespoke nature of this UMIP, it should not be considered a standard against which futuer UMIPs can me measured without considering the amount of risk in establishing a set of rules as qualitative as is the case here. When assessing the risk of using qualitative data to determine an outcome, several things have been considered, such as the intended "in house" use of this UMIP, the intended recipients of the uDAO token, the intended outcome of the KPI option, and how to handle any ambiguities that could arise over the course of this option. 

How could metric manipulation occur?

* By establishing a discussion system for determining qualitative validity of an integration, it reduces the ability of any individual to game the system. The DVM voters have the ability to determine if it appears that someone is acting maliciously and can disqualify any integrations that majority believe should not be included.

How could this price ID be exploited?

* The definition of the metric is inherently qualitative, and utilizes a logic that requires an integration to "earn" its way onto a curated list. This factor, which relies on human judgement, makes it inprobable that it will be exploited.

Do the instructions for determining the price provide people with enough certainty?

* Yes. Voters need only return the number of qualified integrations at the time of expiry.
	
Are there any current or future possible concerns with the way the price identifier is defined?

* It could be determined that the scaling is not appropriate in the event of overwhelming failure of the option. This would happen if we achieved too few integrations or if we reach the goal too quickly.
* Additionally, there is the potential for ambiguities to present that have not been considered at the time of writing. In this case it will be up to the DVM to determine the resolution of those ambiguities. 
* It is possible that over the course of the KPI option, UMA could determine there are other products they would like to prioritize that are not defined in this UMIP. In that case, another KPI option can be launched to include that product.

Are there any concerns around if the price identifier implementation is deterministic?

* No
